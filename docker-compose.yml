services:
  # ============================================
  # PROXY - Velocity (Punto de entrada público)
  # MODO NO PREMIUM - ONLINE_MODE: FALSE
  # ============================================
  proxy:
    image: itzg/mc-proxy:latest
    container_name: mc-proxy
    ports:
      - "25565:25565"
    volumes:
      - ./proxy-data:/server
    environment:
      EULA: "TRUE"
      TYPE: "VELOCITY"
      ONLINE_MODE: "FALSE"
      MEMORY: "1G"
    tty: true
    stdin_open: true
    restart: unless-stopped

  # ============================================
  # LOBBY - Servidor de espera (PaperMC)
  # ============================================
  lobby:
    image: itzg/minecraft-server:latest
    container_name: mc-lobby
    ports:
      - "25566:25565"
    volumes:
      - ./lobby-data:/data
    environment:
      EULA: "TRUE"
      TYPE: "PAPER"
      VERSION: "1.21"
      ONLINE_MODE: "FALSE"
      MEMORY: "4G"
      USE_AIKAR_FLAGS: "TRUE"
      RCON_ENABLED: "TRUE"
      RCON_PASSWORD: "lobby_rcon_pass"
    tty: true
    stdin_open: true
    restart: unless-stopped

  # ============================================
  # SQUIDGAMES - Ronda 1 (Green Light / Red Light)
  # Estrategia Secuencial: 10G RAM cuando esté activo
  # ============================================
  squidgames:
    image: itzg/minecraft-server:latest
    container_name: mc-squidgames
    ports:
      - "25567:25565"
    volumes:
      - ./squidgames-data:/data
    environment:
      EULA: "TRUE"
      TYPE: "PAPER"
      VERSION: "1.21"
      ONLINE_MODE: "FALSE"
      MEMORY: "10G"
      USE_AIKAR_FLAGS: "TRUE"
      RCON_ENABLED: "TRUE"
      RCON_PASSWORD: "squid_rcon_pass"
    tty: true
    stdin_open: true
    restart: unless-stopped

  # ============================================
  # MINEGAMES - Ronda 2 y siguientes
  # Estrategia Secuencial: 10G RAM cuando esté activo
  # ============================================
  minegames:
    image: itzg/minecraft-server:latest
    container_name: mc-minegames
    ports:
      - "25568:25565"
    volumes:
      - ./minegames-data:/data
    environment:
      EULA: "TRUE"
      TYPE: "PAPER"
      VERSION: "1.21"
      ONLINE_MODE: "FALSE"
      MEMORY: "10G"
      USE_AIKAR_FLAGS: "TRUE"
      RCON_ENABLED: "TRUE"
      RCON_PASSWORD: "minegames_rcon_pass"
    tty: true
    stdin_open: true
    restart: unless-stopped
